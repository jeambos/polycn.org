---
/* src/components/BookShelfGrid.astro */

// 1. 数据源：手动维护书籍列表
const books = [
  { title: "道德浪女", cover: "/images/ethical-slut.jpg", link: "/library/books/ethical-slut" },
  { title: "超越单偶制的世界", cover: "/images/beyond-monogamy-preview.jpg", link: "/library/books/beyond-monogamy" },
  { title: "不止于二", cover: "/images/more-than-two-preview.jpg", link: "/library/books/more-than-two" },
  { title: "走向开放", cover: "/images/opening-up-preview.jpg", link: "/library/books/opening-up" },
  { title: "多边关系中的安全感", cover: "/images/polysecure-preview.webp", link: "/library/books/polysecure" },
  { title: "道德浪女（台版）", cover: "/images/ethical-slut-tw-preview.jpg", link: "/library/books/ethical-slut-tw" },
  { title: "另一种重要他人", cover: "/images/the-other-preview.jpg", link: "/library/books/the-other" },
];
---

<div class="shelf-grid-container">
  <div class="book-grid">
    {books.map(book => (
      <a href={book.link} class="book-item">
        <div class="cover-wrapper">
          <img src={book.cover} alt={book.title} loading="lazy" />
        </div>
        <span class="book-title">{book.title}</span>
      </a>
    ))}
  </div>
</div>

<style>
  .shelf-grid-container {
    margin: 2rem 0 4rem 0; /* 下方留出空间给更新列表 */
  }
  
  .shelf-header {
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--sl-color-gray-5); /* 加个淡淡的分割线 */
  }
  
  .shelf-header h3 {
    font-size: 1.5rem;
    margin: 0;
    color: var(--sl-color-white);
    font-weight: 800;
  }

  /* --- 核心网格布局 --- */
  .book-grid {
    display: grid;
    /* 移动端默认：2列 */
    grid-template-columns: repeat(2, 1fr); 
    /* 间距控制：行间距大一点，列间距适中 */
    gap: 2rem 1rem; 
  }

  /* 平板/大屏手机：3列 */
  @media (min-width: 640px) {
    .book-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* 电脑端：5列 (Max 5) */
  @media (min-width: 1024px) {
    .book-grid {
      grid-template-columns: repeat(5, 1fr);
    }
  }

  /* --- 单本书样式 --- */
  .book-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    transition: transform 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
    /* 宽度由 Grid 控制，这里不需要写死 width */
  }

  .book-item:hover {
    transform: translateY(-8px); /* 悬浮上浮效果 */
  }

  /* --- 封面容器 (复用原有样式) --- */
  .cover-wrapper {
    width: 100%;
    /* 限制最大宽度，防止在某些极端宽屏下图片过大 */
    max-width: 160px; 
    aspect-ratio: 2 / 3;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    border-radius: 4px; /* 小圆角 */
    overflow: hidden;
    margin-bottom: 0.8rem;
    background: var(--sl-color-gray-5);
    position: relative;
  }
  
  /* 书脊高光效果 */
  .cover-wrapper::after {
    content: "";
    position: absolute;
    top: 0; left: 0; bottom: 0;
    width: 4px;
    background: rgba(255,255,255,0.1);
    z-index: 1;
  }

  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover; 
    object-position: top center; 
  }
  
  .book-title {
    font-size: 0.95rem;
    line-height: 1.4;
    color: var(--sl-color-text);
    text-align: center;
    font-weight: 500;
    
    /* 限制标题最多显示2行 */
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>