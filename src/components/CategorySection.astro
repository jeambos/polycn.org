---
import RecentUpdates from './RecentUpdates.astro';

interface Props {
  title: string;          // ç‰ˆå—æ ‡é¢˜ï¼Œå¦‚ "ğŸ“š å›¾ä¹¦"
  idPrefix: string;       // ä¼ ç»™ RecentUpdates çš„è¿‡æ»¤å‰ç¼€
  featured: {             // ç‰¹è‰²æ¨èå¡ç‰‡çš„æ•°æ®
    title: string;
    description: string;
    link: string;
    tag?: string;
  };
}

const { title, idPrefix, featured } = Astro.props;
---

<div class="category-section">
  <h2 class="section-title">{title}</h2>
  
  <div class="section-grid">
    {/* å·¦ä¾§ï¼šç‰¹è‰²æ¨èå¡ç‰‡ */}
    <a href={featured.link} class="featured-card">
      <div class="featured-tag">{featured.tag || 'ç¼–è¾‘æ¨è'}</div>
      <h3 class="featured-title">{featured.title}</h3>
      <p class="featured-desc">{featured.description}</p>
      <div class="featured-footer">ç«‹å³é˜…è¯» &rarr;</div>
    </a>

    {/* å³ä¾§ï¼šè¯¥åˆ†ç±»ä¸‹çš„æœ€è¿‘æ›´æ–° */}
    <div class="updates-wrapper">
      <RecentUpdates idPrefix={idPrefix} />
    </div>
  </div>
</div>

<style>
  .category-section {
    margin-bottom: 4rem;
  }

  .section-title {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 1.5rem;
    border-left: 4px solid var(--sl-color-accent);
    padding-left: 1rem;
  }

  .section-grid {
    display: grid;
    grid-template-columns: 1fr; /* ç§»åŠ¨ç«¯é»˜è®¤ä¸€åˆ— */
    gap: 1.5rem;
  }

  /* æ¡Œé¢ç«¯ï¼šå·¦å³ä¸¤åˆ— */
  @media (min-width: 768px) {
    .section-grid {
      grid-template-columns: 1.2fr 1fr; /* å·¦è¾¹ç¨å¾®å®½ä¸€ç‚¹ */
    }
  }

  /* --- ç‰¹è‰²å¡ç‰‡æ ·å¼ --- */
  .featured-card {
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: linear-gradient(135deg, var(--sl-color-gray-6) 0%, var(--sl-color-black) 100%);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 16px;
    padding: 2rem;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s, border-color 0.2s;
    min-height: 220px; /* ä¿è¯å¡ç‰‡æœ‰ä¸€å®šé«˜åº¦ */
  }

  .featured-card:hover {
    transform: translateY(-2px);
    border-color: var(--sl-color-accent);
  }

  .featured-tag {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(var(--sl-color-accent-rgb), 0.15);
    color: var(--sl-color-accent);
    font-size: 0.75rem;
    padding: 0.2rem 0.6rem;
    border-radius: 99px;
    font-weight: bold;
  }

  .featured-title {
    font-size: 1.6rem !important; /* è¦†ç›–é»˜è®¤h3 */
    margin: 0 0 1rem 0 !important;
    color: var(--sl-color-white);
    line-height: 1.2;
  }

  .featured-desc {
    color: var(--sl-color-gray-3);
    line-height: 1.6;
    margin-bottom: 1.5rem;
    flex-grow: 1; /* æŠŠåº•éƒ¨ç®­å¤´æ¨ä¸‹å» */
  }

  .featured-footer {
    color: var(--sl-color-accent);
    font-weight: bold;
    font-size: 0.95rem;
  }
</style>